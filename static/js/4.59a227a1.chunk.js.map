{"version":3,"sources":["components/FullTask/FullTask.js"],"names":["textState","atom","key","default","charCountState","selector","get","length","FullTask","task","textareaRef","useRef","useRecoilState","listStateMain","todoList","setTodoList","index","findIndex","listItem","input","setInput","useState","completed","check","setCheck","redirect","setRedirect","useEffect","title","current","focus","replaceItemAtIndex","arr","newValue","slice","count","useRecoilValue","sx","height","flexDirection","bg","padding","textAlign","borderBottom","color","flexGrow","display","alignItems","justifyContent","checked","onChange","event","target","ref","value","alignSelf","variant","onClick","newList","axios","put","id","then","res","console","log","catch","err","to","removeItemAtIndex","delete"],"mappings":"oNAYMA,EAAYC,YAAK,CACrBC,IAAK,YACLC,QAAS,KAGLC,EAAiBC,YAAS,CAC9BH,IAAK,iBACLI,IAAK,YAGH,OAFaA,EADC,EAATA,KACYN,GAELO,UAyGDC,UApGE,SAAC,GAAY,IAAXC,EAAU,EAAVA,KAEXC,EAAcC,iBAAO,MAE3B,EAAgCC,YAAeC,KAA/C,mBAAOC,EAAP,KAAiBC,EAAjB,KACMC,EAAQF,EAASG,WAAU,SAACC,GAAD,OAAcA,IAAaT,KAE5D,EAA0BG,YAAeZ,GAAzC,mBAAOmB,EAAP,KAAcC,EAAd,KACA,EAA0BC,mBAASZ,EAAKa,WAAxC,mBAAOC,EAAP,KAAcC,EAAd,KACA,EAAgCH,mBAAS,MAAzC,mBAAOI,EAAP,KAAiBC,EAAjB,KAEAC,qBAAU,WACRP,EAASX,EAAKmB,SACd,CAACR,EAAUX,EAAKmB,QAEjBD,qBAAU,WACTjB,EAAYmB,QAAQC,UACpB,IAGF,IAiCMC,EAAqB,SAACC,EAAKhB,EAAOiB,GACtC,MAAM,GAAN,mBAAWD,EAAIE,MAAM,EAAGlB,IAAxB,CAAgCiB,GAAhC,YAA6CD,EAAIE,MAAMlB,EAAQ,MAOjE,IAAMmB,EAAQC,YAAehC,GAE7B,OACG,eAAC,IAAD,CAAMiC,GAAI,CAACC,OAAQ,QAASC,cAAe,UAAWC,GAAG,QAAzD,UACIf,EACD,cAAC,IAAD,CAAKY,GAAI,CAACC,OAAQ,OAAQG,QAAS,MAAOC,UAAW,SAAUC,aAAc,oBAAqBH,GAAI,cAAeI,MAAM,aAA3H,SAAyI,cAAC,IAAD,+BACzI,eAAC,IAAD,CAAKP,GAAI,CACDQ,SAAU,EACVC,QAAS,OACTC,WAAY,SACZR,cAAe,SACfS,eAAgB,SAChBP,QAAS,QANjB,UAQE,eAAC,IAAD,CAAOJ,GAAM,CAETU,WAAY,UAFhB,UAKE,cAAC,IAAD,CAAUE,QAAS1B,EAAO2B,SAAU,SAAAC,GAAK,OAAI3B,EAAS2B,EAAMC,OAAOH,YACjE,cAAC,IAAD,CAAUI,IAAK3C,EAAa2B,GAAI,CAC9BQ,SAAU,GACTS,MAAOnC,EAAO+B,SAAU,SAAAC,GAAK,OAAI/B,EAAS+B,EAAMC,OAAOE,aAI9D,eAAC,IAAD,CAAWjB,GAAI,CAAEkB,UAAW,MAAOX,MAAM,aAAzC,wCAAsET,QAGxE,eAAC,IAAD,WACE,cAAC,IAAD,CAAQqB,QAAQ,SAASC,QAvEd,WAEjB,IAAMC,EAAU3B,EAAmBjB,EAAUE,EAAX,YAAC,eAC9BP,GAD6B,IAEhCmB,MAAOT,EACPG,UAAWC,KAGbR,EAAY2C,GAEZC,IAAMC,IAAI,UAAUnD,EAAKoD,GAAK,CAAC,UAAatC,EAAO,MAAQJ,EAAO,QAAU,SAC3E2C,MAAK,SAAAC,GACJC,QAAQC,IAAIF,MAGbG,OAAM,SAAAC,GAAG,OAAIH,QAAQC,IAAIE,MAE1BzC,EAAY,cAAC,IAAD,CAAU0C,GAAG,QAsDnB,2BACA,cAAC,IAAD,CAAQZ,QAAQ,SAASC,QApDd,WACjB,IAAMC,EAgBR,SAA2B1B,EAAKhB,GAC9B,MAAM,GAAN,mBAAWgB,EAAIE,MAAM,EAAGlB,IAAxB,YAAmCgB,EAAIE,MAAMlB,EAAQ,KAjBrCqD,CAAkBvD,EAAUE,GAE5CD,EAAY2C,GAEZC,IAAMW,OAAO,UAAU7D,EAAKoD,IAC3BC,MAAK,SAAAC,GACJC,QAAQC,IAAIF,MAGbG,OAAM,SAAAC,GAAG,OAAIH,QAAQC,IAAIE,OA0CpB,+BACA,cAAC,IAAD,CAASC,GAAG,IAAZ,SAAiB,cAAC,IAAD,CAAQZ,QAAQ,SAAhB","file":"static/js/4.59a227a1.chunk.js","sourcesContent":["import React, {useEffect, useState, useRef} from 'react'\nimport {atom, selector, useRecoilState, useRecoilValue} from 'recoil';\n\nimport {Flex, Box, Checkbox, Paragraph,Label,Button,Textarea,Heading  } from 'theme-ui'\n\nimport axios from '../../axios';\n \nimport {NavLink, Redirect} from 'react-router-dom';\n\nimport {listStateMain} from '../../recoliState';\n\n\nconst textState = atom({\n  key: 'textState', \n  default: '', \n});\n\nconst charCountState = selector({\n  key: 'charCountState', \n  get: ({get}) => {\n    const text = get(textState);\n\n    return text.length;\n  },\n});\n\n\nconst FullTask = ({task}) => {\n\n  const textareaRef = useRef(null);\n\n  const [todoList, setTodoList] = useRecoilState(listStateMain);\n  const index = todoList.findIndex((listItem) => listItem === task);\n\n  const [input, setInput] = useRecoilState(textState);\n  const [check, setCheck] = useState(task.completed);\n  const [redirect, setRedirect] = useState(null);\n\n  useEffect(() => {\n    setInput(task.title);\n  },[setInput, task.title])\n\n   useEffect(() => {\n    textareaRef.current.focus();\n  },[]);\n  \n\n  const saveChange = () => {\n\n    const newList = replaceItemAtIndex(todoList, index, {\n      ...task,\n      title: input,\n      completed: check,\n    });\n\n    setTodoList(newList);\n\n    axios.put('/todos/'+task.id , {\"completed\": check, \"title\":input, \"user_id\":\"1292\" })\n    .then(res => {\n      console.log(res);\n          \n    })\n    .catch(err => console.log(err));\n\n    setRedirect(<Redirect to='/' />);\n  }\n\n  const deleteItem = () => {\n    const newList = removeItemAtIndex(todoList, index);\n\n    setTodoList(newList);\n\n    axios.delete('/todos/'+task.id )\n    .then(res => {\n      console.log(res);\n          \n    })\n    .catch(err => console.log(err));\n  };\n\n  const replaceItemAtIndex = (arr, index, newValue) => {\n    return [...arr.slice(0, index), newValue, ...arr.slice(index + 1)];\n  }\n\n  function removeItemAtIndex(arr, index) {\n    return [...arr.slice(0, index), ...arr.slice(index + 1)];\n  }\n\n  const count = useRecoilValue(charCountState);\n\n  return(\n    \t<Flex sx={{height: '100vh', flexDirection: 'column'}} bg=\"muted\">\n        {redirect}\n        <Box sx={{height: '77px', padding: '5px', textAlign: 'center', borderBottom: '1px solid #442929', bg: 'nextPrimary', color:'secondary'}}><Heading>Edycja zadania</Heading></Box>\n        <Box sx={{\n                flexGrow: 1,\n                display: 'flex',\n                alignItems: 'center',\n                flexDirection: 'column',\n                justifyContent: 'center',\n                padding: '20px'\n              }}>\n          <Label sx = {{\n              \n              alignItems: 'center',\n            }}\n          >\n            <Checkbox checked={check} onChange={event => setCheck(event.target.checked)}/>\n              <Textarea ref={textareaRef} sx={{\n                flexGrow: 1,\n              }} value={input} onChange={event => setInput(event.target.value)}/>\n            \n            \n          </Label>\n          <Paragraph sx={{ alignSelf: 'end', color:'secondary'}}>Ilość znaków: {count}</Paragraph>\n        </Box>\n        \n        <Box>\n          <Button variant='triple' onClick={saveChange}>Zapisz Zmiany</Button>\n          <Button variant='triple' onClick={deleteItem}>Usuń Zadanie</Button>\n          <NavLink to='/' ><Button variant='triple'>Wróć</Button></NavLink>\n        </Box>\n      </Flex>\n  );\n\n}\n\nexport default FullTask;"],"sourceRoot":""}