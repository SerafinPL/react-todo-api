{"version":3,"sources":["components/FullTask/FullTask.js"],"names":["textState","atom","key","default","charCountState","selector","get","length","FullTask","task","textareaRef","useRef","useRecoilState","listStateMain","todoList","setTodoList","index","findIndex","listItem","input","setInput","useState","completed","check","setCheck","redirect","setRedirect","useEffect","title","current","focus","saveChange","newList","replaceItemAtIndex","axios","put","id","then","res","console","log","catch","err","to","arr","newValue","slice","count","useRecoilValue","sx","height","flexDirection","maxHeight","bg","padding","textAlign","borderBottom","color","flexGrow","display","alignItems","justifyContent","checked","onChange","event","target","ref","value","onKeyDown","keyCode","alignSelf","variant","onClick","removeItemAtIndex","delete"],"mappings":"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","file":"static/js/4.c6ff682a.chunk.js","sourcesContent":["import React, {useEffect, useState, useRef} from 'react'\nimport {atom, selector, useRecoilState, useRecoilValue} from 'recoil';\n\nimport {Flex, Box, Checkbox, Paragraph,Label,Button,Textarea,Heading  } from 'theme-ui'\n\nimport axios from '../../axios';\n \nimport {NavLink, Redirect} from 'react-router-dom';\n\nimport {listStateMain} from '../../recoliState';\n\n\nconst textState = atom({\n  key: 'textState', \n  default: '', \n});\n\nconst charCountState = selector({\n  key: 'charCountState', \n  get: ({get}) => {\n    const text = get(textState);\n\n    return text.length;\n  },\n});\n\n\nconst FullTask = ({task}) => {\n\n  const textareaRef = useRef(null);\n\n  const [todoList, setTodoList] = useRecoilState(listStateMain);\n  const index = todoList.findIndex((listItem) => listItem === task);\n\n  const [input, setInput] = useRecoilState(textState);\n  const [check, setCheck] = useState(task.completed);\n  const [redirect, setRedirect] = useState(null);\n\n  useEffect(() => {\n    setInput(task.title);\n  },[setInput, task.title])\n\n   useEffect(() => {\n    textareaRef.current.focus();\n  },[]);\n  \n  const onEnter = (event) => {\n  \n    if (event.keyCode === 13) {\n      saveChange();\n    }\n  } \n\n  const saveChange = () => {\n\n    const newList = replaceItemAtIndex(todoList, index, {\n      ...task,\n      title: input,\n      completed: check,\n    });\n\n    setTodoList(newList);\n\n    axios.put('/todos/'+task.id , {\"completed\": check, \"title\":input, \"user_id\":\"1292\" })\n    .then(res => {\n      console.log(res);\n          \n    })\n    .catch(err => console.log(err));\n\n    setRedirect(<Redirect to='/' />);\n  }\n\n  const deleteItem = () => {\n    const newList = removeItemAtIndex(todoList, index);\n\n    setTodoList(newList);\n\n    axios.delete('/todos/'+task.id )\n    .then(res => {\n      console.log(res);\n          \n    })\n    .catch(err => console.log(err));\n  };\n\n  const replaceItemAtIndex = (arr, index, newValue) => {\n    return [...arr.slice(0, index), newValue, ...arr.slice(index + 1)];\n  }\n\n  function removeItemAtIndex(arr, index) {\n    return [...arr.slice(0, index), ...arr.slice(index + 1)];\n  }\n\n  const count = useRecoilValue(charCountState);\n\n  return(\n    \t<Flex sx={{height: '100%', flexDirection: 'column', maxHeight: '-webkit-fill-available'}} bg=\"muted\">\n        {redirect}\n        <Box sx={{height: '77px', padding: '5px', textAlign: 'center', borderBottom: '1px solid #442929', bg: 'nextPrimary', color:'secondary'}}><Heading>Edycja zadania</Heading></Box>\n        <Box sx={{\n                flexGrow: 1,\n                display: 'flex',\n                alignItems: 'center',\n                flexDirection: 'column',\n                justifyContent: 'center',\n                padding: '20px'\n              }}>\n          <Label sx = {{\n              \n              alignItems: 'center',\n            }}\n          >\n            <Checkbox checked={check} onChange={event => setCheck(event.target.checked)}/>\n              <Textarea ref={textareaRef} sx={{\n                flexGrow: 1,\n              }} value={input} onChange={event => setInput(event.target.value)}\n              onKeyDown={onEnter}\n              />\n            \n            \n          </Label>\n          <Paragraph sx={{ alignSelf: 'end', color:'secondary'}}>Ilość znaków: {count}</Paragraph>\n        </Box>\n        \n        <Box>\n          <Button variant='triple' onClick={saveChange}>Zapisz Zmiany</Button>\n          <Button variant='triple' onClick={deleteItem}>Usuń Zadanie</Button>\n          <NavLink to='/' ><Button variant='triple'>Wróć</Button></NavLink>\n        </Box>\n      </Flex>\n  );\n\n}\n\nexport default FullTask;"],"sourceRoot":""}