{"version":3,"sources":["components/FullTask/FullTask.js"],"names":["textState","atom","key","default","charCountState","selector","get","length","FullTask","task","useRecoilState","listStateMain","todoList","setTodoList","index","findIndex","listItem","input","setInput","useState","completed","check","setCheck","redirect","setRedirect","useEffect","title","replaceItemAtIndex","arr","newValue","slice","count","useRecoilValue","sx","height","flexDirection","bg","padding","textAlign","borderBottom","flexGrow","display","alignItems","justifyContent","checked","onChange","event","target","value","alignSelf","variant","onClick","newList","axios","put","id","then","res","console","log","catch","err","to","removeItemAtIndex","delete"],"mappings":"oNAYMA,EAAYC,YAAK,CACrBC,IAAK,YACLC,QAAS,KAGLC,EAAiBC,YAAS,CAC9BH,IAAK,iBACLI,IAAK,YAGH,OAFaA,EADC,EAATA,KACYN,GAELO,UAqHDC,UAhHE,SAAC,GAAY,IAAXC,EAAU,EAAVA,KAIjB,EAAgCC,YAAeC,KAA/C,mBAAOC,EAAP,KAAiBC,EAAjB,KACMC,EAAQF,EAASG,WAAU,SAACC,GAAD,OAAcA,IAAaP,KAE5D,EAA0BC,YAAeV,GAAzC,mBAAOiB,EAAP,KAAcC,EAAd,KACA,EAA0BC,mBAASV,EAAKW,WAAxC,mBAAOC,EAAP,KAAcC,EAAd,KACA,EAAgCH,mBAAS,MAAzC,mBAAOI,EAAP,KAAiBC,EAAjB,KAEAC,qBAAU,WACRP,EAAST,EAAKiB,SACd,IAEF,IAkDMC,EAAqB,SAACC,EAAKd,EAAOe,GACtC,MAAM,GAAN,mBAAWD,EAAIE,MAAM,EAAGhB,IAAxB,CAAgCe,GAAhC,YAA6CD,EAAIE,MAAMhB,EAAQ,MAOjE,IAAMiB,EAAQC,YAAe5B,GAE7B,OACG,eAAC,IAAD,CAAM6B,GAAI,CAACC,OAAQ,QAASC,cAAe,UAAWC,GAAG,QAAzD,UACIb,EACD,cAAC,IAAD,CAAKU,GAAI,CAACC,OAAQ,OAAQG,QAAS,MAAOC,UAAW,SAAUC,aAAc,oBAAqBH,GAAI,WAAtG,SAAkH,cAAC,IAAD,+BAClH,eAAC,IAAD,CAAKH,GAAI,CACDO,SAAU,EACVC,QAAS,OACTC,WAAY,SACZP,cAAe,SACfQ,eAAgB,SAChBN,QAAS,QANjB,UAQE,eAAC,IAAD,CAAOJ,GAAM,CAETS,WAAY,UAFhB,UAKE,cAAC,IAAD,CAAUE,QAASvB,EAAOwB,SAAU,SAAAC,GAAK,OAAIxB,EAASwB,EAAMC,OAAOH,YACjE,cAAC,IAAD,CAAUX,GAAI,CACZO,SAAU,GACTQ,MAAO/B,EAAO4B,SAAU,SAAAC,GAAK,OAAI5B,EAAS4B,EAAMC,OAAOC,aAI9D,eAAC,IAAD,CAAWf,GAAI,CAAEgB,UAAW,OAA5B,wCAAmDlB,QAGrD,eAAC,IAAD,WACE,cAAC,IAAD,CAAQmB,QAAQ,SAASC,QAvEd,WAEjB,IAAMC,EAAUzB,EAAmBf,EAAUE,EAAX,YAAC,eAC9BL,GAD6B,IAEhCiB,MAAOT,EACPG,UAAWC,KAGbR,EAAYuC,GAEZC,IAAMC,IAAI,UAAU7C,EAAK8C,GAAK,CAAC,UAAalC,EAAO,MAAQJ,EAAO,QAAU,SAC3EuC,MAAK,SAAAC,GACJC,QAAQC,IAAIF,MAGbG,OAAM,SAAAC,GAAG,OAAIH,QAAQC,IAAIE,MAE1BrC,EAAY,cAAC,IAAD,CAAUsC,GAAG,QAsDnB,2BACA,cAAC,IAAD,CAAQZ,QAAQ,SAASC,QApDd,WACjB,IAAMC,EAgBR,SAA2BxB,EAAKd,GAC9B,MAAM,GAAN,mBAAWc,EAAIE,MAAM,EAAGhB,IAAxB,YAAmCc,EAAIE,MAAMhB,EAAQ,KAjBrCiD,CAAkBnD,EAAUE,GAE5CD,EAAYuC,GAEZC,IAAMW,OAAO,UAAUvD,EAAK8C,IAC3BC,MAAK,SAAAC,GACJC,QAAQC,IAAIF,MAGbG,OAAM,SAAAC,GAAG,OAAIH,QAAQC,IAAIE,OA0CpB,+BACA,cAAC,IAAD,CAASC,GAAG,IAAZ,SAAiB,cAAC,IAAD,CAAQZ,QAAQ,SAAhB","file":"static/js/4.88cbc7e3.chunk.js","sourcesContent":["import React, {useEffect, useState} from 'react'\nimport {atom, selector, useRecoilState, useRecoilValue} from 'recoil';\n\nimport {Flex, Box,Input, Container, Checkbox, Text, Paragraph,Label,Button,Textarea,Heading  } from 'theme-ui'\n\nimport axios from '../../axios';\n \nimport {NavLink, Redirect} from 'react-router-dom';\n\nimport {listStateMain} from '../../recoliState';\n\n\nconst textState = atom({\n  key: 'textState', \n  default: '', \n});\n\nconst charCountState = selector({\n  key: 'charCountState', \n  get: ({get}) => {\n    const text = get(textState);\n\n    return text.length;\n  },\n});\n\n\nconst FullTask = ({task}) => {\n\n\n\n  const [todoList, setTodoList] = useRecoilState(listStateMain);\n  const index = todoList.findIndex((listItem) => listItem === task);\n\n  const [input, setInput] = useRecoilState(textState);\n  const [check, setCheck] = useState(task.completed);\n  const [redirect, setRedirect] = useState(null);\n\n  useEffect(() => {\n    setInput(task.title);\n  },[])\n\n  const clickCheckbox = (checked) => {\n    \n    const newList = replaceItemAtIndex(todoList, index, {\n      ...task,\n      completed: checked,\n    });\n\n    setTodoList(newList);\n    \n    axios.put('/todos/'+task.id , {\"completed\":checked, \"title\":task.title, \"user_id\":\"1292\" })\n    .then(res => {\n      console.log(res);\n          \n    })\n    .catch(err => console.log(err));\n  }\n\n  const saveChange = () => {\n\n    const newList = replaceItemAtIndex(todoList, index, {\n      ...task,\n      title: input,\n      completed: check,\n    });\n\n    setTodoList(newList);\n\n    axios.put('/todos/'+task.id , {\"completed\": check, \"title\":input, \"user_id\":\"1292\" })\n    .then(res => {\n      console.log(res);\n          \n    })\n    .catch(err => console.log(err));\n\n    setRedirect(<Redirect to='/' />);\n  }\n\n  const deleteItem = () => {\n    const newList = removeItemAtIndex(todoList, index);\n\n    setTodoList(newList);\n\n    axios.delete('/todos/'+task.id )\n    .then(res => {\n      console.log(res);\n          \n    })\n    .catch(err => console.log(err));\n  };\n\n  const replaceItemAtIndex = (arr, index, newValue) => {\n    return [...arr.slice(0, index), newValue, ...arr.slice(index + 1)];\n  }\n\n  function removeItemAtIndex(arr, index) {\n    return [...arr.slice(0, index), ...arr.slice(index + 1)];\n  }\n\n  const count = useRecoilValue(charCountState);\n\n  return(\n    \t<Flex sx={{height: '100vh', flexDirection: 'column'}} bg=\"muted\">\n        {redirect}\n        <Box sx={{height: '77px', padding: '5px', textAlign: 'center', borderBottom: '1px solid #442929', bg: 'primary'}}><Heading>Edycja zadania</Heading></Box>\n        <Box sx={{\n                flexGrow: 1,\n                display: 'flex',\n                alignItems: 'center',\n                flexDirection: 'column',\n                justifyContent: 'center',\n                padding: '20px'\n              }}>\n          <Label sx = {{\n              \n              alignItems: 'center',\n            }}\n          >\n            <Checkbox checked={check} onChange={event => setCheck(event.target.checked)}/>\n              <Textarea sx={{\n                flexGrow: 1,\n              }} value={input} onChange={event => setInput(event.target.value)}/>\n            \n            \n          </Label>\n          <Paragraph sx={{ alignSelf: 'end'}}>Ilość znaków: {count}</Paragraph>\n        </Box>\n        \n        <Box>\n          <Button variant='triple' onClick={saveChange}>Zapisz Zmiany</Button>\n          <Button variant='triple' onClick={deleteItem}>Usuń Zadanie</Button>\n          <NavLink to='/' ><Button variant='triple'>Wróć</Button></NavLink>\n        </Box>\n      </Flex>\n  );\n\n}\n\nexport default FullTask;"],"sourceRoot":""}